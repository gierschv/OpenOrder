<div class="ng-orders">
    <h1>Orders</h1>

    <div class="pull-right">Search an order by ID:</div>

    <h3>New orders</h3>
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <th>Order ID</th>
                <th>Customer</th>
                <th>Order date</th>
                <th class="actions">&nbsp;</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="order in orders">
                <td>{{order.id}}</td>
                <td ng-show="graphUsers[order.user]"><img ng-src='https://graph.facebook.com/{{graphUsers[order.user].id}}/picture' width="20px" /> {{graphUsers[order.user].name}}</td>
                <td ng-hide="graphUsers[order.user]">Unknown customer</td>
                <td>{{order.dateCreated | date:'dd/MM HH:mm:ss'}}</td>
                <td><a href="" ng-click="orderDetails($index)"><i class="icon icon-zoom-in"></i></a> <a href=""><i class="icon icon-ok"></i></a></td>
            </tr>
        </tbody>
    </table>

    <div id="orderModal" class="modal hide fade">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h3>Order details #{{orders[detailedOrder].id}}</h3>
        </div>
        <div class="modal-body">
            <table class="table">
                <tr>
                    <td >Customer</td>
                    <td ng-show="orders[detailedOrder].user"><img ng-src='https://graph.facebook.com/{{graphUsers[orders[detailedOrder].user].id}}/picture' width="20px" />  {{graphUsers[orders[detailedOrder].user].name}}</td>
                    <td ng-hide="orders[detailedOrder].user">Unknown customer</td>
                </tr>
                <tr>
                    <td>Created date</td>
                    <td>{{orders[detailedOrder].dateCreated | date:'dd/MM HH:mm:ss'}}</td>
                </tr>
                <tr>
                    <td>Sold date</td>
                    <td>{{orders[detailedOrder].datedateSold | date:'dd/MM HH:mm:ss'}}</td>
                </tr>
            </table>

            <h3>Components</h3>
            <table class="table table-striped table-condensed">
                <tr ng-repeat="component in orders[detailedOrder].components">
                    <td>{{getComponentById(component).name}}</td>
                    <td>&pound; {{getComponentById(component).price | number:2}}</td>
                </tr>

                <tr><td><strong>Total:</strong></td><td>&pound; {{detailedOrderPrice | number:2}} </td></tr>
            </table>
        </div>
        <div class="modal-footer">
            <button class="btn" data-dismiss="modal">Close</button>
            <button type="submit" class="btn btn-success"><i class="icon icon-white icon-ok"></i> Mark as selled</button>
        </div>
    </div>
</div>